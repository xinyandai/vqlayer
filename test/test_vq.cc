//
// Created by xinyan on 10/3/2020.
//
#include <iostream>
#include "test.h"


using std::vector;

void test_l2dist() {
  vector<T>  a_  = { 0.1357047994833403, -0.9500842332443221,
                     0.12282730752559588, 1.901416969226425,
                     -1.573997496240008, 0.20564681374665741,
                     -1.2207054473768937, 1.5676540439571955 };
  vector<T>  b_  = { 1.7100876807416627, -0.0916384140982638,
                     -0.521708942952666, -0.2554553782549226,
                     -0.7275724232438326, 0.9838586571305012,
                     -0.9566618187976683, 0.31541295429937083 };
  float norm =  11.243011844519039 ;
  compare("l2dist", l2dist_sqr(a_.data(), b_.data(), a_.size()), norm);
}

void test_normalize() {
  vector<T>  x_  = { -0.7013111947006322, 2.0916561690332434,
                     -1.9366954724327659, -0.3323386267204376,
                     -0.2401314937676975, -1.551648923978096,
                     -1.1261494917863988, 0.25266865981609093 };
  vector<T>  n_  = { -0.19815927256176744, 0.5910087676297393,
                     -0.5472237843782981, -0.09390407712400847,
                     -0.06785045281430274, -0.4384267987879468,
                     -0.3181996320242052, 0.07139289691459437 };

  normalize(x_.data(), x_.size());
  compare("normalize", x_, n_.data(), x_.size());
}



int main() {
  test_l2dist();
  test_normalize();
  return 0;
}
